<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Exoplanet Habitability Score</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 2rem;
      background: #f9fafb;
      color: #333;
    }
    h1 { margin-bottom: 1rem; }
    .slider-group { margin-bottom: 1.5rem; }
    .label { display: flex; justify-content: space-between; margin-bottom: 0.25rem; }
    input[type="range"] { width: 70%; }
    .bar {
      height: 20px; background: #ddd; border-radius: 10px;
      overflow: hidden; margin: 1rem 0;
    }
    .bar-fill {
      height: 100%; background: #10b981; width: 0%;
      transition: width 0.3s ease;
    }
    .score { font-size: 1.5rem; font-weight: bold; text-align: right; }
    .hint { color:#6b7280; font-size: 0.9rem; margin: 0.25rem 0 1rem; }
  </style>
</head>
<body>
  <h1>Exoplanet Habitability Score</h1>
  <div class="hint">Inputs are relative to Earth, where Earth = 1.00. Score peaks when values are near Earth-like conditions (1.0).</div>

  <div id="sliders"></div>

  <div class="bar">
    <div id="bar-fill" class="bar-fill"></div>
  </div>
  <div class="score" id="score">Score: 1.000</div>

  <script>
    const weights = {
      pl_insol: 0.30,
      pl_rade: 0.25,
      pl_masse: 0.20,
      pl_eqt: 0.15,
      pl_orbsmax: 0.10
    };

    const friendlyLabels = {
      pl_insol: "Insolation Flux",
      pl_rade: "Radius (Earth Radii)",
      pl_masse: "Mass (Earth Masses)",
      pl_eqt: "Equilibrium Temperature (K, Earth ≈ 255 K ⇒ 1.0)",
      pl_orbsmax: "Semi-Major Axis (AU)"
    };

    const targets = {
      pl_insol: 1.0,
      pl_rade: 1.0,
      pl_masse: 1.0,
      pl_eqt: 1.0,
      pl_orbsmax: 1.0
    };

    const params = Object.keys(weights);
    const slidersDiv = document.getElementById("sliders");

    const values = {};
    params.forEach(p => values[p] = 1.0);

    function earthSimilarity(value, target = 1.0) {
      return Math.max(0, 1 - Math.abs(value - target));
    }

    function updateScore() {
      let score = 0;
      for (const p of params) {
        const sim = earthSimilarity(values[p], targets[p]);
        score += weights[p] * sim;
      }
      score = Math.max(0, Math.min(1, score));
      document.getElementById("bar-fill").style.width = (score * 100).toFixed(1) + "%";
      document.getElementById("score").textContent = "Score: " + score.toFixed(3);
    }

    params.forEach(p => {
      const group = document.createElement("div");
      group.className = "slider-group";

      const label = document.createElement("div");
      label.className = "label";
      label.innerHTML = `<span>${friendlyLabels[p]}</span><span id="${p}-val">1.00</span>`;
      group.appendChild(label);

      const slider = document.createElement("input");
      slider.type = "range";
      slider.min = "0";
      slider.max = "2";
      slider.step = "0.01";
      slider.value = "1.00"; // Earth-like default

      slider.oninput = () => {
        const v = parseFloat(slider.value);
        values[p] = v;
        document.getElementById(p + "-val").textContent = v.toFixed(2);
        updateScore();
      };

      group.appendChild(slider);
      slidersDiv.appendChild(group);
    });

    updateScore();
  </script>
</body>
</html>
